# CUSTOM EXTRACTOR EXAMPLE
# This demonstrates using a custom Python extractor for specialized sources.

environment: test
domain: crm

system: salesforce
entity: accounts

bronze:
  enabled: true
  source_type: custom
  connection_name: SALESFORCE_CONN
  source_query: Account SOQL feed
  partition_column: load_dt
  options:
    load_pattern: full
    custom_extractor:
      module: examples.custom_extractors.salesforce_example
      class_name: SalesforceExampleExtractor
    salesforce:
      soql_query: SELECT Id, Name, LastModifiedDate FROM Account
    local_output_dir: ./output

silver:
  enabled: true

  entity_kind: state
  history_mode: scd2
  delete_mode: tombstone_state
  schema_mode: allow_new_columns

  natural_keys:
    - Id

  change_ts_column: LastModifiedDate

  attributes:
    - Name
    - OwnerId
    - Status__c

  partition_by:
    - effective_from_dt
