# BASIC API EXTRACTION EXAMPLE
# This demonstrates extracting data from a REST API endpoint

platform:
  bronze:
    # Storage backend: "s3", "azure", "gcs", or "local"
    # Defaults to "s3" if not specified (for backward compatibility)
    storage_backend: "s3"
    
    s3_bucket: "analytics-bronze"
    s3_prefix: "bronze"
    partitioning:
      use_dt_partition: true
    output_defaults:
      allow_csv: true
      allow_parquet: true
      parquet_compression: "snappy"

  s3_connection:
    endpoint_url_env: "BRONZE_S3_ENDPOINT"
    access_key_env: "BRONZE_S3_ACCESS_KEY"
    secret_key_env: "BRONZE_S3_SECRET_KEY"

source:
  type: "api"
  system: "example_product"
  table: "tickets"

  api:
    base_url: "https://api.example.com"
    endpoint: "/v1/tickets"
    method: "GET"

    auth_type: "bearer"
    auth_token_env: "EXAMPLE_API_TOKEN"

    params:
      page_size: 100

    pagination:
      type: "none"

  run:
    max_rows_per_file: 500000
    write_csv: true
    write_parquet: true
    s3_enabled: false
    local_output_dir: "./output"
