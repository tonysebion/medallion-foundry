environment: dev
domain: retail_demo

system: retail_demo
entity: orders    # align with sample snapshot folder naming

bronze:
  enabled: true
  source_type: file
  path_pattern: ./sampledata/source_samples/pattern3_scd_state/system=retail_demo/table=orders/pattern=pattern3_scd_state/dt=2025-11-03/current-history-part-0001.csv
  partition_column: load_date
  options:
    format: csv
    load_pattern: current_history
    local_output_dir: ./output

silver:
  enabled: true

  entity_kind: state
  history_mode: scd2                   # Bronze delivers current + history slices
  delete_mode: tombstone_state
  schema_mode: strict

  natural_keys:
    - order_id

  change_ts_column: updated_at

  attributes:
    - customer_id
    - status
    - effective_start
    - effective_end
    - current_flag

  partition_by:
    - effective_start_dt

  version: 2
  load_partition_name: load_date
