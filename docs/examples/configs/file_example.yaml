environment: dev
domain: retail_demo

system: retail_demo
entity: orders

bronze:
  enabled: true
  source_type: file
  path_pattern: ./docs/examples/data/bronze_samples/full/system=retail_demo/table=orders/pattern=full/dt=2025-11-01/full-part-0001.csv  # demo file shipped with the repo
  partition_column: extract_date                                     # matches the dt folders in the sample data
  options:
    format: csv                                                      # the bundled sample is CSV
    load_pattern: full                                               # Bronze receives a full slice per day

silver:
  enabled: true

  entity_kind: event             # order rows are discrete happenings
  input_mode: replace_daily      # Bronze sends a complete slice for each dt partition
  delete_mode: ignore            # soft deletes are passed through for now
  schema_mode: strict            # this sample fails the job if columns drift

  natural_keys:
    - order_id                   # order_id uniquely identifies each event

  event_ts_column: updated_at    # upstream sends a timestamp on every record
  change_ts_column: updated_at   # reuse the same column for ordering

  attributes:
    - customer_id
    - status
    - order_total

  partition_by:
    - event_ts_dt                # derived from updated_at during the Silver run
