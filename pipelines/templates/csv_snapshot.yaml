# yaml-language-server: $schema=../schema/pipeline.schema.json
#
# TEMPLATE: CSV File Full Snapshot
# ================================
# Use this for CSV files that are full snapshots:
# - Daily export files from legacy systems
# - Files that contain all records each time
#
# To run:
#   python -m pipelines ./pipelines/templates/csv_snapshot.yaml --date 2025-01-15

# Optional metadata
name: csv_snapshot_template
description: Template for loading full snapshot CSV files

# Bronze layer - raw data extraction
bronze:
  system: your_system       # e.g., "legacy_erp", "salesforce"
  entity: your_entity       # e.g., "customers", "orders"
  source_type: file_csv
  source_path: "./data/{entity}_{run_date}.csv"
  # load_pattern defaults to full_snapshot

# Silver layer - data curation
silver:
  natural_keys: [id]            # What makes a record unique?
  change_timestamp: updated_at  # When was the record last changed?
  # entity_kind defaults to state
  # history_mode defaults to current_only (SCD Type 1)
